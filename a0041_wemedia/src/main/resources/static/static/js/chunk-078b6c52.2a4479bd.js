(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-078b6c52"],{"0b7b":function(e,t,a){var r=a("8f95"),n=a("7463"),i=a("0363"),o=i("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||n[r(e)]}},1316:function(e,t,a){e.exports=a("9cd3")},2616:function(e,t,a){var r=a("0363"),n=a("7463"),i=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},"2dc0":function(e,t,a){e.exports=a("588c")},"471b":function(e,t,a){"use strict";var r=a("194a"),n=a("4fff"),i=a("faaa"),o=a("2616"),s=a("6725"),l=a("6c15"),c=a("0b7b");e.exports=function(e){var t,a,d,u,p,f=n(e),m="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,b=void 0!==v,y=0,g=c(f);if(b&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==g||m==Array&&o(g))for(t=s(f.length),a=new m(t);t>y;y++)l(a,y,b?v(f[y],y):f[y]);else for(u=g.call(f),p=u.next,a=new m;!(d=p.call(u)).done;y++)l(a,y,b?i(u,v,[d.value,y],!0):d.value);return a.length=y,a}},"484e":function(e,t,a){var r=a("a5eb"),n=a("471b"),i=a("7de7"),o=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:n})},"53a6":function(e,t,a){"use strict";var r=a("d4de"),n=a.n(r);n.a},"588c":function(e,t,a){a("5145"),a("3e47"),e.exports=a("59d7")},"59d7":function(e,t,a){var r=a("8f95"),n=a("0363"),i=a("7463"),o=n("iterator");e.exports=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(r(t))}},"5ab9":function(e,t,a){a("e519");var r=a("764b");e.exports=r.Array.isArray},"74e7":function(e,t,a){e.exports=a("bc59")},"7de7":function(e,t,a){var r=a("0363"),n=r("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(l){}e.exports=function(e,t){if(!t&&!i)return!1;var a=!1;try{var r={};r[n]=function(){return{next:function(){return{done:a=!0}}}},e(r)}catch(l){}return a}},"97b0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"task-manage"},[a("a-card",{staticClass:"task-list-card",attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"频道标题"}},[a("a-input",{attrs:{placeholder:"请输入频道标题"},on:{blur:e.handleSearch},model:{value:e.queryParam.channelTitle,callback:function(t){e.$set(e.queryParam,"channelTitle",t)},expression:"queryParam.channelTitle"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"视频Id"}},[a("a-input",{attrs:{placeholder:"请输入视频Id"},on:{blur:e.handleSearch},model:{value:e.queryParam.videoId,callback:function(t){e.$set(e.queryParam,"videoId",t)},expression:"queryParam.videoId"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"视频标题"}},[a("a-input",{attrs:{placeholder:"请输入视频标题"},on:{blur:e.handleSearch},model:{value:e.queryParam.videoTitle,callback:function(t){e.$set(e.queryParam,"videoTitle",t)},expression:"queryParam.videoTitle"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"描述"}},[a("a-input",{attrs:{placeholder:"请输入描述"},on:{blur:e.handleSearch},model:{value:e.queryParam.description,callback:function(t){e.$set(e.queryParam,"description",t)},expression:"queryParam.description"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"下载状态"}},[a("a-select",{attrs:{placeholder:"请选择下载状态",allowClear:!0},on:{change:e.handleSearch},model:{value:e.queryParam.downloadStatus,callback:function(t){e.$set(e.queryParam,"downloadStatus",t)},expression:"queryParam.downloadStatus"}},[a("a-select-option",{attrs:{value:1}},[e._v("已下载")]),a("a-select-option",{attrs:{value:0}},[e._v("未下载")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"重建状态"}},[a("a-select",{attrs:{placeholder:"请选择重建状态",allowClear:!0},on:{change:e.handleSearch},model:{value:e.queryParam.rebuildStatus,callback:function(t){e.$set(e.queryParam,"rebuildStatus",t)},expression:"queryParam.rebuildStatus"}},[a("a-select-option",{attrs:{value:1}},[e._v("已重建")]),a("a-select-option",{attrs:{value:0}},[e._v("未重建")])],1)],1)],1),a("a-col",{attrs:{md:4,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[e.selectedRowKeys.length?a("a-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:e.handleBatchDown}},[e._v("批量下载")]):e._e(),e.selectedRowKeys.length?a("a-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:e.handleBatchBuild}},[e._v("批量重建")]):e._e()],1)])],1)],1)],1),a("a-table",{attrs:{scroll:{x:"max-content"},rowKey:function(e){return e.id},rowSelection:{type:"checkbox",selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},dataSource:e.dataList,columns:e.taskTableTitle,pagination:e.pagination},on:{change:e.handlePageChage},scopedSlots:e._u([{key:"platform",fn:function(t,r){return[a("span",{class:r.transferList.filter((function(e){return"bilibili"===e.platform})).length?"bg_red":"bg_pink"},[e._v("哔哩")]),a("a-divider",{attrs:{type:"vertical"}}),a("span",{class:r.transferList.filter((function(e){return"ximalaya"===e.platform})).length?"bg_red":"bg_pink"},[e._v("喜马")]),a("a-divider",{attrs:{type:"vertical"}}),a("span",{class:r.transferList.filter((function(e){return"douyu"===e.platform})).length?"bg_red":"bg_pink"},[e._v("斗鱼")]),a("a-divider",{attrs:{type:"vertical"}}),a("span",{class:r.transferList.filter((function(e){return"douyin"===e.platform})).length?"bg_red":"bg_pink"},[e._v("抖音")]),a("a-divider",{attrs:{type:"vertical"}}),a("span",{class:r.transferList.filter((function(e){return"xiguashiping"===e.platform})).length?"bg_red":"bg_pink"},[e._v("西瓜")]),a("a",{staticStyle:{"margin-left":"5px"},on:{click:function(t){return e.handleAddRecord(r)}}},[a("a-icon",{attrs:{type:"setting"}})],1)]}},{key:"videoTitle",fn:function(t){return[e._v(" "+e._s(t)+" "),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t,expression:"text",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticStyle:{float:"right"}},[a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"copy"}})],1)]}},{key:"thumbnails",fn:function(t){return[a("a",{attrs:{href:t,target:"_blank"}},[e._v("图")])]}},{key:"videoId",fn:function(t){return[a("a",{attrs:{href:"https://www.youtube.com/watch?v="+t,target:"_blank"}},[e._v(e._s(t))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t,expression:"text",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}]},[a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"copy"}})],1)]}},{key:"description",fn:function(t){return[a("ellipsis",{attrs:{length:8,tooltip:""}},[e._v(e._s(t))]),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t,expression:"text",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticStyle:{float:"right"}},[a("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:"copy"}})],1)]}},{key:"downloadStatus",fn:function(t,r){return[1===t?a("a",[a("a-icon",{attrs:{type:"check"}})],1):a("a",{attrs:{disabled:r.downClick},on:{click:function(t){return e.handleDownload(r.id)}}},[a("a-icon",{attrs:{type:"cloud-download"}})],1)]}},{key:"rebuildStatus",fn:function(t,r){return[1===t?a("a",[a("a-icon",{attrs:{type:"check"}})],1):a("a",{attrs:{disabled:r.rebuildClick},on:{click:function(t){return e.handleRebuild(r.id)}}},[a("a-icon",{attrs:{type:"redo"}})],1)]}}])})],1),a("AddVideoModal",{ref:"modal",on:{ok:e.handleUpdatePlat}})],1)},n=[],i=(a("a4d3"),a("e01a"),a("4de4"),a("a15b"),a("498a"),a("1316")),o=a.n(i);function s(e){if(o()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var l=a("a06f"),c=a.n(l),d=a("2dc0"),u=a.n(d);function p(e){if(u()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return c()(e)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){return s(e)||p(e)||f()}a("8fb1");var h=a("0c63"),v=(a("99af"),a("9efd")),b="/v1/video";function y(e,t,a){return Object(v["a"])({url:"".concat(b,"/list?page=").concat(t,"&pageNum=").concat(a),method:"post",data:e})}function g(e){return Object(v["a"])({url:"".concat(b,"/download?ids=").concat(e),method:"post"})}function w(e){return Object(v["a"])({url:"".concat(b,"/rebuild?ids=").concat(e),method:"post"})}var x=a("c1df"),k=a.n(x),_=a("2af9"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"添加",width:"50%",visible:e.visible,maskClosable:!1,footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:14}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"发布平台",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["platform",{rules:[{required:!0,whitespace:!0,message:"请选择发布平台"}]}],expression:"['platform', {rules: [{required: true, whitespace: true, message: '请选择发布平台'}]}]"}],attrs:{placeholder:"请选择发布平台"}},e._l(e.selectList,(function(t){return a("a-select-option",{key:t.key,attrs:{disabled:t.disabled}},[e._v(e._s(t.value))])})),1)],1),a("a-form-item",{attrs:{label:"url",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,whitespace:!0,message:"请输入频道标题"}]}],expression:"['url', {rules: [{required: true, whitespace: true, message: '请输入频道标题'}]}]"}],attrs:{placeholder:"请输入url"}})],1),a("a-form-item",{attrs:{label:"发布时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["publishTime",{rules:[{type:"object",required:!0,whitespace:!0,message:"请选择发布时间"}]}],expression:"['publishTime', {rules: [{type: 'object', required: true, whitespace: true, message: '请选择发布时间'}]}]"}],staticStyle:{width:"100%"},attrs:{showTime:""}})],1)],1),a("a-button",{staticStyle:{"margin-right":"10px"},on:{click:e.handleCancel}},[e._v("取消")]),a("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1),a("a-col",{attrs:{span:10}},[a("ul",e._l(e.record,(function(t,r){return a("li",{key:r},[a("a",{attrs:{href:t.url}},[e._v(e._s(e._f("statusFilter")(t.platform)))]),a("a",{on:{click:function(a){return e.handleDelete(t.id)}}},[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"close"}})],1)])})),0)])],1)],1)},C=[],P=(a("caad"),a("d81d"),a("a434"),a("2532"),a("cf80")),I={data:function(){return{form:this.$form.createForm(this),labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}},visible:!1,initialValue:{},videoId:"",record:[],selectList:[{key:"xiguashiping",value:"西瓜视频",disabled:!1},{key:"douyin",value:"抖音",disabled:!1},{key:"bilibili",value:"哔哩哔哩",disabled:!1},{key:"ximalaya",value:"喜马拉雅",disabled:!1},{key:"douyu",value:"斗鱼",disabled:!1}]}},filters:{statusFilter:function(e){var t={xiguashiping:"西瓜视频",douyin:"抖音",bilibili:"哔哩哔哩",ximalaya:"喜马拉雅",douyu:"斗鱼"};return t[e]}},methods:{moment:k.a,edit:function(e){this.visible=!0,this.record=e.transferList,this.videoId=e.id,this.handleIsVisible()},handleIsVisible:function(){var e=this.record.map((function(e){return e.platform}));this.selectList.map((function(t){e.includes(t.key)?t.disabled=!0:t.disabled=!1}))},handleOk:function(){var e=this,t=this.form.validateFields;t({force:!0},(function(t,a){t||(e.visible=!1,a.videoId=e.videoId,a.publishTime=a["publishTime"].valueOf(),Object(P["a"])(a).then((function(t){e.$message.success("添加成功"),e.$emit("ok")})))}))},handleCancel:function(){this.visible=!1},handleDelete:function(e){var t=this;this.$confirm({title:"提示",content:"确认删除?",onOk:function(){return Object(P["b"])(e).then((function(a){for(var r=0;r<t.record.length;r++)if(t.record[r].id===e){t.record.splice(r,1);break}t.handleIsVisible()})).catch((function(){}))},onCancel:function(){}})},clearInitialValue:function(){var e=this;this.$nextTick((function(){e.form.setFieldsValue({platform:void 0,publishTime:void 0,url:""})}))}}},q=I,T=(a("d431"),a("2877")),R=Object(T["a"])(q,S,C,!1,null,"76a20dc8",null),$=R.exports,N=h["a"].createFromIconfontCN({scriptUrl:"//at.alicdn.com/t/font_1333873_359uq5at4h6.js"}),j={name:"TaskManage",components:{AddVideoModal:$,IconFont:N,Ellipsis:_["a"]},data:function(){return{logParam:{jobs_type:"",jobs_name:"",status:null,custodian_id:null},dataList:[],selectedRowKeys:[],taskTableTitle:[{title:"ID",dataIndex:"id"},{title:"发布频道",dataIndex:"platform",scopedSlots:{customRender:"platform"}},{title:"频道标题",dataIndex:"channelTitle",width:"15%"},{title:"视频Id",dataIndex:"videoId",scopedSlots:{customRender:"videoId"}},{title:"视频标题",dataIndex:"videoTitle",scopedSlots:{customRender:"videoTitle"}},{title:"缩略图",dataIndex:"thumbnails",scopedSlots:{customRender:"thumbnails"},align:"center"},{title:"描述",dataIndex:"description",scopedSlots:{customRender:"description"}},{title:"下载状态",dataIndex:"downloadStatus",scopedSlots:{customRender:"downloadStatus"},align:"center"},{title:"重建状态",dataIndex:"rebuildStatus",scopedSlots:{customRender:"rebuildStatus"},align:"center"}],pagination:{},page:1,pageNum:20,current:1,queryParam:{channelTitle:"",videoId:"",videoTitle:"",description:""},selectedRows:[],dealQueryParam:{}}},created:function(){var e={};this.dealQueryParam=e,this.getVideoList(e,this.page,this.pageNum)},methods:{handleAddRecord:function(e){var t=this;this.$nextTick((function(){t.$refs.modal.clearInitialValue()})),this.$refs.modal.edit(e)},moment:k.a,getVideoList:function(e,t,a){var r=this;y(e,t,a).then((function(e){r.dataList=e.data.records;var n={current:t,pageSize:a,total:e.data.total};r.pagination=n}))},handleSearch:function(){var e={};this.queryParam.channelTitle.trim()&&(e.channelTitle=this.queryParam.channelTitle.trim()),this.queryParam.videoId.trim()&&(e.videoId=this.queryParam.videoId.trim()),this.queryParam.videoTitle.trim()&&(e.videoTitle=this.queryParam.videoTitle.trim()),this.queryParam.description.trim()&&(e.description=this.queryParam.description.trim()),e.downloadStatus=this.queryParam.downloadStatus,e.rebuildStatus=this.queryParam.rebuildStatus,this.dealQueryParam=e,this.current=this.page,this.getVideoList(e,this.page,this.pageNum)},handleAdd:function(){this.$refs.modal.clearInitialValue(),this.$refs.modal.edit()},handleUpdate:function(e){var t=this;this.$nextTick((function(){t.$refs.modal.editInitialValue(e)})),this.$refs.modal.edit()},handlePageChage:function(e){this.current=e.current,this.getVideoList(this.dealQueryParam,e.current,this.pageNum)},handleUpdatePlat:function(){this.getVideoList(this.dealQueryParam,this.current,this.pageNum)},onCopy:function(){this.$message.success("复制成功")},onError:function(){this.$message.error("复制失败")},handleDownload:function(e){var t=m(this.dataList),a=t.filter((function(t){return t.id===e}))[0];a.downClick=!0,this.dataList=t,g(e).then((function(e){}))},handleRebuild:function(e){var t=m(this.dataList),a=t.filter((function(t){return t.id===e}))[0];a.rebuildClick=!0,this.dataList=t,w(e).then((function(e){}))},onSelectChange:function(e){this.selectedRowKeys=e},handleBatchDown:function(){var e=this.selectedRowKeys.join(",");g(e).then((function(e){}))},handleBatchBuild:function(){var e=this.selectedRowKeys.join(",");w(e).then((function(e){}))}}},L=j,A=(a("53a6"),Object(T["a"])(L,r,n,!1,null,"6b422858",null));t["default"]=A.exports},"9cd3":function(e,t,a){e.exports=a("5ab9")},a06f:function(e,t,a){e.exports=a("74e7")},bc59:function(e,t,a){a("3e47"),a("484e");var r=a("764b");e.exports=r.Array.from},bebb:function(e,t,a){},cf80:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return s}));a("99af");var r=a("9efd"),n="/v1/transfer";function i(e,t,a){return Object(r["a"])({url:"".concat(n,"/list?page=").concat(t,"&pageNum=").concat(a),method:"post",data:e})}function o(e){return Object(r["a"])({url:"".concat(n,"/del?id=").concat(e),method:"post"})}function s(e){return Object(r["a"])({url:"".concat(n,"/add"),method:"post",data:e})}},d431:function(e,t,a){"use strict";var r=a("bebb"),n=a.n(r);n.a},d4de:function(e,t,a){},e519:function(e,t,a){var r=a("a5eb"),n=a("6220");r({target:"Array",stat:!0},{isArray:n})},faaa:function(e,t,a){var r=a("6f8d");e.exports=function(e,t,a,n){try{return n?t(r(a)[0],a[1]):t(a)}catch(o){var i=e["return"];throw void 0!==i&&r(i.call(e)),o}}}}]);